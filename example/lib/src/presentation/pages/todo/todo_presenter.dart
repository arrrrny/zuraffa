// Generated by zfa
// zfa generate Todo --methods=get,getList,watch,watchList,create,update,delete --vpc

import 'package:zuraffa/zuraffa.dart';
import '../../../domain/entities/todo/todo.dart';
import '../../../domain/repositories/todo_repository.dart';
import '../../../domain/usecases/todo/get_todo_usecase.dart';
import '../../../domain/usecases/todo/get_todo_list_usecase.dart';
import '../../../domain/usecases/todo/watch_todo_usecase.dart';
import '../../../domain/usecases/todo/watch_todo_list_usecase.dart';
import '../../../domain/usecases/todo/create_todo_usecase.dart';
import '../../../domain/usecases/todo/update_todo_usecase.dart';
import '../../../domain/usecases/todo/delete_todo_usecase.dart';

class TodoPresenter extends Presenter {
  final TodoRepository todoRepository;

  late final GetTodoUseCase _getTodo;
  late final GetTodoListUseCase _getTodoList;
  late final WatchTodoUseCase _watchTodo;
  late final WatchTodoListUseCase _watchTodoList;
  late final CreateTodoUseCase _createTodo;
  late final UpdateTodoUseCase _updateTodo;
  late final DeleteTodoUseCase _deleteTodo;

  TodoPresenter({required this.todoRepository}) {
    _getTodo = registerUseCase(GetTodoUseCase(todoRepository));
    _getTodoList = registerUseCase(GetTodoListUseCase(todoRepository));
    _watchTodo = registerUseCase(WatchTodoUseCase(todoRepository));
    _watchTodoList = registerUseCase(WatchTodoListUseCase(todoRepository));
    _createTodo = registerUseCase(CreateTodoUseCase(todoRepository));
    _updateTodo = registerUseCase(UpdateTodoUseCase(todoRepository));
    _deleteTodo = registerUseCase(DeleteTodoUseCase(todoRepository));
  }

  Future<Result<Todo, AppFailure>> getTodo(int id) {
    return _getTodo.call(QueryParams<Todo>(filter: Eq(TodoFields.id, id)));
  }

  Future<Result<List<Todo>, AppFailure>> getTodoList([
    ListQueryParams<Todo> params = const ListQueryParams(),
  ]) {
    return _getTodoList.call(params);
  }

  Stream<Result<Todo, AppFailure>> watchTodo(int id) {
    return _watchTodo.call(QueryParams<Todo>(filter: Eq(TodoFields.id, id)));
  }

  Stream<Result<List<Todo>, AppFailure>> watchTodoList([
    ListQueryParams<Todo> params = const ListQueryParams(),
  ]) {
    return _watchTodoList.call(params);
  }

  Future<Result<Todo, AppFailure>> createTodo(Todo todo) {
    return _createTodo.call(todo);
  }

  Future<Result<Todo, AppFailure>> updateTodo(int id, TodoPatch data) {
    return _updateTodo.call(UpdateParams(id: id, data: data));
  }

  Future<Result<void, AppFailure>> deleteTodo(int id) {
    return _deleteTodo.call(DeleteParams(id: id));
  }
}
