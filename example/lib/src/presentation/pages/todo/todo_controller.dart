// Generated by zfa
// zfa generate Todo --methods=get,getList,create,update,delete,watch --vpc

import 'package:zuraffa/zuraffa.dart';
import 'todo_presenter.dart';
import '../../../domain/entities/todo/todo.dart';

class TodoController extends Controller {
  final TodoPresenter _presenter;

  TodoController(this._presenter);


  Future<void> getTodo(String id) async {

    final result = await _presenter.getTodo(id);

    result.fold(
      (entity) {},
      (failure) {},
    );
  }

  Future<void> getTodoList([ListQueryParams params = const ListQueryParams()]) async {

    final result = await _presenter.getTodoList(params);

    result.fold(
      (list) {},
      (failure) {},
    );
  }

  Future<void> createTodo(Todo todo) async {

    final result = await _presenter.createTodo(todo);

    result.fold(
      (created) {},
      (failure) {},
    );
  }

  Future<void> updateTodo(String id, Partial<Todo> data) async {

    final result = await _presenter.updateTodo(id, data);

    result.fold(
      (updated) {},
      (failure) {},
    );
  }

  Future<void> deleteTodo(String id) async {

    final result = await _presenter.deleteTodo(id);

    result.fold(
      (_) {},
      (failure) {},
    );
  }

  void watchTodo(String? id) {

    _presenter.watchTodo(id).listen(
      (result) {
        result.fold(
          (entity) {},
          (failure) {},
        );
      },
    );
  }

  @override
  void onDisposed() {
    _presenter.dispose();
    super.onDisposed();
  }
}
