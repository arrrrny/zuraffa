// Generated by zfa
// zfa generate Product --methods=get,getList,watch,watchList,create,update,delete --vpc

import 'package:zuraffa/zuraffa.dart';
import '../../../domain/entities/product/product.dart';
import '../../../domain/repositories/product_repository.dart';
import '../../../domain/usecases/product/get_product_usecase.dart';
import '../../../domain/usecases/product/get_product_list_usecase.dart';
import '../../../domain/usecases/product/watch_product_usecase.dart';
import '../../../domain/usecases/product/watch_product_list_usecase.dart';
import '../../../domain/usecases/product/create_product_usecase.dart';
import '../../../domain/usecases/product/update_product_usecase.dart';
import '../../../domain/usecases/product/delete_product_usecase.dart';

class ProductPresenter extends Presenter {
  final ProductRepository productRepository;

  late final GetProductUseCase _getProduct;
  late final GetProductListUseCase _getProductList;
  late final WatchProductUseCase _watchProduct;
  late final WatchProductListUseCase _watchProductList;
  late final CreateProductUseCase _createProduct;
  late final UpdateProductUseCase _updateProduct;
  late final DeleteProductUseCase _deleteProduct;

  ProductPresenter({
    required this.productRepository,
  }) {
    _getProduct = registerUseCase(GetProductUseCase(productRepository));
    _getProductList = registerUseCase(GetProductListUseCase(productRepository));
    _watchProduct = registerUseCase(WatchProductUseCase(productRepository));
    _watchProductList =
        registerUseCase(WatchProductListUseCase(productRepository));
    _createProduct = registerUseCase(CreateProductUseCase(productRepository));
    _updateProduct = registerUseCase(UpdateProductUseCase(productRepository));
    _deleteProduct = registerUseCase(DeleteProductUseCase(productRepository));
  }

  Future<Result<Product, AppFailure>> getProduct(String id) {
    return _getProduct.call(QueryParams<Product>(params: Params({'id': id})));
  }

  Future<Result<List<Product>, AppFailure>> getProductList(
      [ListQueryParams<Product> params = const ListQueryParams()]) {
    return _getProductList.call(params);
  }

  Stream<Result<Product, AppFailure>> watchProduct(String id) {
    return _watchProduct.call(QueryParams<Product>(params: Params({'id': id})));
  }

  Stream<Result<List<Product>, AppFailure>> watchProductList(
      [ListQueryParams<Product> params = const ListQueryParams()]) {
    return _watchProductList.call(params);
  }

  Future<Result<Product, AppFailure>> createProduct(Product product) {
    return _createProduct.call(product);
  }

  Future<Result<Product, AppFailure>> updateProduct(
      String id, Partial<Product> data) {
    return _updateProduct.call(UpdateParams<String, Partial<Product>>(
        id: id, data: Partial<Product>()));
  }

  Future<Result<void, AppFailure>> deleteProduct(String id) {
    return _deleteProduct.call(DeleteParams<String>(id: id));
  }
}
